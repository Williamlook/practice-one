<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>JS drum kit</title>
</head>
<link href="style.css" type="text/css" rel="stylesheet">
<body>
	<div class="keys">
	<div data-keys="65"class="key">
	    <kbd>A</kbd>
		<span>clap</span>
	</div>
	<div data-keys="83"class="key">
	    <kbd>S</kbd>
		<span>hihat</span>
	</div>
	<div data-keys="68"class="key">
	    <kbd>D</kbd>
		<span>kick</span>
	</div>
	<div data-keys="70"class="key">
	    <kbd>F</kbd>
		<span>openhat</span>
	</div>
	<div data-keys="71"class="key">
	    <kbd>G</kbd>
		<span>boom</span>
	</div>
	<div data-keys="72"class="key">
	    <kbd>H</kbd>
		<span>ride</span>
	</div>
	<div data-keys="74"class="key">
	    <kbd>J</kbd>
		<span>snare</span>
	</div>
	<div data-keys="75"class="key">
	    <kbd>K</kbd>
		<span>tom</span>
	</div>
	<div data-keys="76"class="key">
	    <kbd>L</kbd>
		<span>tink</span>
	</div>
	</div>
	<audio data-keys="65" src="sounds/clap.wav"></audio>
	<audio data-keys="83" src="sounds/hihat.wav"></audio>
	<audio data-keys="68" src="sounds/kick.wav"></audio>
    <audio data-keys="70" src="sounds/openhat.wav"></audio>
    <audio data-keys="71" src="sounds/boom.wav"></audio>
    <audio data-keys="72" src="sounds/ride.wav"></audio>
    <audio data-keys="74" src="sounds/snare.wav"></audio>
    <audio data-keys="75" src="sounds/tom.wav"></audio>
    <audio data-keys="76" src="sounds/tink.wav"></audio>
	
	<script type="text/javascript">
    function addplay(e){
    	const key=document.querySelector(`div[data-keys="${e.keyCode}"]`);
    	const audio=document.querySelector(`audio[data-keys="${e.keyCode}"]`);
    	if(!audio) return;
    	key.classList.add("playing");
    	audio.currentTime=0;
    	audio.play();
    };
    window.addEventListener('keydown',addplay);
    function removePlay(e){
    	if(e.propertyName!=="transform") return;
    	e.target.classList.remove('playing');
    }
    const keys=Array.from(document.querySelectorAll(".key"));      
    keys.forEach(key=>key.addEventListener('transitionend',removePlay));   //循环添加绑定事件
	</script>
</body>
</html>